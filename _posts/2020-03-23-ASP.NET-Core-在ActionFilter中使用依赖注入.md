---
layout: default
title:  "ASP.NET Core - 在ActionFilter中使用依赖注入"
---
上次因为[ActionFilter引发的一个EF异常](https://www.cnblogs.com/kklldog/p/not-use-sync-in-actionfilter.html),本质上是对Core版本的ActionFilter的知识掌握不够牢固造成的，所以花了点时间仔细阅读了微软的官方文档。除了IActionFilter、IAsyncActionFilter的问题，还有一个就是依赖注入在ActionFilter上的使用也需要注意。   
当我们的Filter需要使用某个Service的时候，我们一般会通过构造函数注入。
```
  public class FilterInjectAttribute: ActionFilterAttribute
    {
        public FilterInjectAttribute(IMyService myService)
        {
            if (myService == null)
            {
                throw new ArgumentNullException("myService");
            }

            Console.WriteLine("Service {0} was injected .", myService.GetServiceName());
        }
    }
```
但是我们在使用Attribute的时候VS直接给出红色提示，需要传入构造函数的参数，否则无法编译过去。
